{% ckan_extends %}

{% block primary_content %}
  <section class="module">
    <div class="module-content">
	  <h1 class="page-heading">
		{% block page_heading %}
			{{ _('Log in') }}
		{% endblock %}
	  </h1>

      {% set ci="" %}
      {% set uri="" %}
      <div id="g_id_onload" data-client_id="{{ ci }}" data-login_uri="{{ uri }}" data-auto_prompt="false">
      </div>
      <div class="g_id_signin" data-type="standard"></div>

      <p>
        {{ _('Google log-in is only available to MapAction team members') }}
      </p>

      <p>
      {{ _('or') }}
      {% set auth_text = _("log in with your {site_title} account") %}
      <a data-module='show-hide' href="#">{{ auth_text.format(site_title=app_globals.site_title) }}</a>
      </p>

      <div class="js-hide login-container">
        {% snippet "user/snippets/login_form.html", action=c.login_handler, error_summary=error_summary %}
      </div>
    </div>
  </section>
{% endblock %}

{% block help_forgotten %}
{% endblock %}

{% block scripts %}
{# TODO
Can't seem to avoid using scripts block (doesn't load in content block)
- probably because the googleauth plugin uses the scripts block
#}
  {{ super() }}
  {% resource 'mapactiontheme/show-hide.js' %}
{% endblock %}
